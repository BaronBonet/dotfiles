# Enable Powerlevel10k instant prompt. Should stay close to the top of ~/.config/zsh/.zshrc.
# Initialization code that may require console input (password prompts, [y/n]
# confirmations, etc.) must go above this block; everything else may go below.
if [[ -r "${XDG_CACHE_HOME:-$HOME/.cache}/p10k-instant-prompt-${(%):-%n}.zsh" ]]; then
  source "${XDG_CACHE_HOME:-$HOME/.cache}/p10k-instant-prompt-${(%):-%n}.zsh"
fi

export PATH=/opt/homebrew/bin:$PATH

# AWS Completer to allow for tab completions
export PATH=/opt/homebrew/bin/aws_completer:$PATH

source "$XDG_CONFIG_HOME/.aliases/.aliases"
source ~/powerlevel10k/powerlevel10k.zsh-theme

# ZSH complete
autoload bashcompinit && bashcompinit
autoload -U compinit; compinit
# https://github.com/zsh-users/zsh-completions
fpath=($ZDOTDIR/plugins/zsh-completions/src $fpath)

# Completions
source "$ZDOTDIR/plugins/zsh-completions"

# VIM mode
source "$ZDOTDIR/plugins/vim_mode"

# Change curser
source "$ZDOTDIR/plugins/curser_mode"

# Auto suggestions while typing
source "$ZDOTDIR/plugins/zsh-autosuggestions/zsh-autosuggestions.zsh"
bindkey '^ ' autosuggest-accept # Remap the right arrow key to Ctrl-space

# Syntax highliting in the shell
source "$ZDOTDIR/plugins/zsh-syntax-highlighting/zsh-syntax-highlighting.zsh"

# For managing python versions, needs to be installed 
# https://asdf-vm.com/guide/getting-started.html
. "$HOME/.asdf/asdf.sh"

export PATH="$PATH:$HOME/.local/bin"

# Allows pre commit to run using zsh
[[ -e ~/.profile ]] && emulate sh -c 'source ~/.profile'
# Make sure we use default pypi unless set
export PIP_INDEX_URL=https://pypi.org/simple


# To customize prompt, run `p10k configure` or edit ~/.config/zsh/.p10k.zsh.
[[ ! -f ~/.config/zsh/.p10k.zsh ]] || source ~/.config/zsh/.p10k.zsh

[ -f ~/.fzf.zsh ] && source ~/.config/fzf/.fzf.zsh


# Autoload aws completer
autoload bashcompinit && bashcompinit
autoload -Uz compinit && compinit
complete -C '/opt/homebrew/bin/aws_completer' aws

# Trying source-tooling
# source ~/source_software/source-tooling/tooling.zsh
# init-source-shell-env
# export SOURCE_TOOLING_AWS_INFRA_PROFILE=infra-admin
 #
# GO stuff
export GOBIN=$(go env GOPATH)/bin
export PATH=$PATH:$GOBIN

# Goland
export PATH=$PATH:/Applications/GoLand.app/Contents/MacOS

# ruby should use the lasest version managed by brew
# export PATH="$PATH:/opt/homebrew/opt/ruby/bin"
# export PATH="$PATH:/opt/homebrew/opt/ruby/bin/gem"


# Add RVM to PATH for scripting. Make sure this is the last PATH variable change.
# export PATH="$PATH:$HOME/.rvm/bin"
eval "$(~/.rbenv/bin/rbenv init - bash)"
